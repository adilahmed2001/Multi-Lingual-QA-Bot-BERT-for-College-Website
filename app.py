from flask import Flask,render_template,request,jsonify
from transformers import pipeline
from easygoogletranslate import EasyGoogleTranslate

model_checkpoint="/Users/harshith/Downloads/chatbotWeb/chatmodel"
question_answerer=pipeline("question-answering",model=model_checkpoint,max_answer_len=200)
context=["UG Admissions of MVSR engineering college through EAMCET/ECET have No of seats in Automobile engineering is 60. No of seats for civil engineering are 60. Total No of seats in computer science and engineering (CSE) are 180 where CSE(AI&ML) are 60, CSE(Data Science) are 60, CSE(IoT-CS-BcT) are 60. No of Seats in Electrical and Electronics Engineering (ECE) are 180. No of Seats in Information Technology (IT) are 180. No of seats in mechanical engineering are 60. For TSEAMCET, TSECET&PGECET Convenor Seats Contact Mr I Krishna, Incharge-Academics, phone number: 9703001616. To know UG starting and ending ranks details of students admitted 2021-2022 open this link - <a href=\"https://drive.google.com/drive/folders/1xT4EtKM2R9CNjK1S3zvI-S69qV2gC7VX\">Click Here </a>. For Lateral Entry there is a provision to admit 10 percentage of intake in each branch directly into BE II year. Candidates with a diploma qualification are admitted through Convenor ECET after qualifying in ECET entrance examination. To know PG starting and ending ranks details of students admitted 2021-2022 open this link - <a href=\"https://drive.google.com/drive/folders/1xT4EtKM2R9CNjK1S3zvI-S69qV2gC7VX\">Click Here </a>. To know about M.E/M.Tech rules and regulations 2020-2021 open this link - <a href=\"https://www.mvsrec.edu.in/images/Admissions/RulesRegulations/MEMTech-Rules-Regulations-2020-2021.pdf\">Click Here </a>. To know about ME/MTech starting rank and ending ranks 2016-2017 to 2020-2021 open this link - <a href=\"https://www.mvsrec.edu.in/images/Admissions/ME_MTech_Starting_Ending_2016-2021.pdf\">Click Here </a>. To know about MBA Starting and ending ranks 2016-2017 to 2020-2021 - <a href=\"https://www.mvsrec.edu.in/images/Admissions/MBA_Starting_Ending_Ranks_2016-2021.pdf\">Click Here </a>. Present PG level Intake or seats of programme ME ECE are 18, MTech CSE are 18, ME CAD/CAM are 18, ME Civil-Structural Engineering are 18. For MBA program seats are 60 in total. BE Eligibility Requirements are: Admissions under Convenor's Quota or Category A (70 percentage of intake in each branch): A Candidate for admission to the four-year degree course in Engineering must have passed the Intermediate examination of the Board of Intermediate Education, Government of Telangana with Mathematics, Physics and Chemistry as optional subjects, or any other examination recognised by the Osmania University as equivalent, All the eligible applicants for admission into First Year for BE courses shall have to qualify in the EAMCET Examination conducted by the Government of Telangana, The qualifying exam for BE courses is EAMCET and ECET, The candidates will be admitted into this college by the Convenor at the EAMCET counselling as per merit based on EAMCET rank and marks in Intermediate examination, The candidates should satisfy local/non-local status requirement as laid down in the Telangana Educational institutions (Regulation of Admissions) Order 1974 as amended from time to time. Admissions under Category B (30 percentage of intake in each branch): These seats will be filled by college as per the guidelines of Telangana Government after due notification. ME/MTech-Eligibility Requirements: Of the 18 seats available 13 are filled up by Convenor, PG admissions and 5 under sponsored Qualification: Bachelor's degree in Engg/Technology, AMIE/AMIETE or similar qualifications recognised by UGC as equivalent to BE/BTech, For admission by Convenor, candidate should have valid GATE scores or PGECET scores. For sponsored category, applicants should have 55% in the qualifying BE or equivalent degree and should apply to the college directly. MBA Eligibility Requirements:  A candidate seeking admission into Two year MBA programme must satisfy the following criteria:  A pass in bachelor's degree in any field with 45% marks in aggregate, Must have qualified in Integrated Common Entrance Test (ICET) conducted by Telangana State Council of Higher Education, Government of Telangana, The candidates should satisfy local/non-local status requirement as laid down in the Telangana Educational institutions (Regulation of Admissions) Order 1974 as amended from time to time, The candidates will be admitted on the basis of rank secured at the ICET, The Convener admits 70% of the intake to the MBA programme based on the ICET rank, The Management admits remaining 30 percentage under Management and NRI quota as per the Telangana government rules. Admissions under Category B:  These seats will be filled by college as per the guidelines of Telangana Govternment after due notification. Tuition fee fixed by TAFRC for the Academic Years 2022-23, 2023-24 and 2024-25 for BE Courses - Rs. 1,30,000/- (as per GO MS No. 37 dated 18.10.2022). Fee for ME/MTech Courses - Rs. 1,00,000/- (as per GO MS No. 38 dated 18.10.2022). Fee for MBA - Rs. 70,000/-(as per GO MS No. 39 dated 18.10.2022).",
	"The college placement cell was established in the year 1997. The placement cell team consists of J Prasanna Kumar, V Sridhar, I Radha, N Sravanthi. Placements mail id is placements@mvsrec.edu.in. Mr J Prasanna Kumar is the Placement and Training Officer (TPO). Contact details of J Prasanna Kumar (TPO) are 9885921778, 9703001818. Mr V Sridhar is the Assistant TPO. Contact details of V Sridhar (Assistant TPO) is 9908885582. Mrs I Radha is the Placements Assistant. Contact details of I Radha (Placements Assistant) is 9703001818. Mrs N Sravanthi is the Junior Placements Assistant. Contact details of N Sravanthi (Junior placements Assistant) is 9573071855. To know about the department wise placement faculty coordinators follow this link <a href=\"https://www.mvsrec.edu.in/images/PDF/Placements/DeptWise_placementcoordinators.pdf\">Click here </a>. The link for online placement registration is <a href=\"http://103.161.31.210:5602/form/\">Click here </a>. To know about previous years placements follow this link <a href=\"https://www.mvsrec.edu.in/index.php?option=com_content&view=article&layout=edit&id=1319&Itemid=1648\">Click here </a>. To know the 2021-22 year placements follow this link <a href=\"https://www.mvsrec.edu.in/images/Placements/plc_21-22.pdf\">Click here </a>. To know the 2020-21 year placements follow this link <a href= \"https://www.mvsrec.edu.in/images/Placements/plc_20-21.pdf\">Click here </a>.  The total number of students who have done internship in 2020-21 is 951 CSE(142), ECE(96), EEE(249), Civil(173), Automobile(15). The total number of students who have done internship in 2019-20 is 677 CSE(212), ECE(29), EEE(112), Civil(134), Automobile(9). The total number of students who have done internship in 2018-19 is 360 CSE(120), ECE(54), EEE(15), Civil(107), Automobile(11). The total number of students who have done internship in 2017-18 is 29 CSE(12), ECE(9), EEE(2), Civil(0), Automobile(2). To know about company recruiters follow this link <a href=\"https://www.mvsrec.edu.in/index.php?option=com_content&view=article&layout=edit&id=1411&Itemid=1263\">Click here </a>.",
	"industry  training helps graduates gain relevant knowledge and practical experience of tools & technologies used at the industry.Industries or companies offering training or certification programs are Cisco,Wipro,SalesForce,ServiceNow,Oracle,AWS-Amazon Web Services,BluePrism and MicroChip.faculty coordinators of cisco training or certification are G Vijay Kumar (Dept of CSE),Vikram Narayandas(Dept of CSE) and K Murali Krishna(Dept of CSE). programs or training or certifications offered by cisco are C, C++, Python,CCNA, IoT, Cyber Security.faculty coordinators of wipro training or certifications are G Srishailam(Asst Prof CSE) and P Phani Prasad(Asst Prof CSE).training or certifications or programs offered by wipro is J2EE.faculty coordinators for SalesForce training or certifications is V Sridhar (Asst Prof CSE). programs or courses or training offered by SalesForce is CRM.faculty coordinators for ServiceNow training or certifications is V Sridhar (Asst Prof CSE).programs or courses or training offered by ServiceNow is CRM. faculty coordinators for Oracle training or certifications are V Sridhar (Asst Prof CSE) and G  Srishailam(Asst Prof CSE).programs or courses or training offered by Oracle are Java, SQL.faculty coordinators for AWS training or certifications are T Sujanavan (Asst Prof CSE) and T Srikanth(Asst Prof CSE).programs or courses or training offered by AWS are Cloud Dev /Ops /Arch /Security,Machine Learning (NLP) and Data Analysis / Engineering.faculty coordinators for BluePrism training or certifications are N Sabitha(Asst Prof CSE) and P  Shalini(Asst Prof CSE).programs or courses or training offered by BluePrism is Process Automation. faculty coordinators for MicroChip training or certifications are Dr D Sirisha(Asst Prof CSE) and T Laxmi(Asst Prof CSE).programs or courses or training offered by MicroChip is Embedded Systems. number of trained or certified students are 1000+(cisco),200+(Wipro),10+(SalesForce),10+(ServiceNow),100+(Oracle),500+(AWS),150+(BluePrism) and 150+(MicroChip).",
	"Facilities provided by college are Library, physical education, transport, hostel facility, computer centre, sports club, heath care, canteen, bank ATM,E-Resources.Library : Librarian of college Library is R.Ashok for any queries mail him. Email - library@mvsrec.edu.in.Working hours of library are 9:30AM - 6PM.To know more about facilities provided my library follow this link -<a href=\"https://www.mvsrec.edu.in/images/IT/m-v-s-r-engineering-college-library--.pdf\">Click Here</a> .Physical Education : Sports & games play an important role in the overall development of the student. They provide relief to the student from his academic activities. To know about sports and games facilities follow this link - <a href=\"https://www.mvsrec.edu.in/images/PE/SportsFacilities.pdf\">.Click here</a>. Students are encouraged to play when they have no class-work. Further, extended playing time is provided beyond college hours (4.00 PM to 6.00 PM) under the guidance of the Physical Director. Students who excel are identified and are encouraged to participate in Annual Inter College Tournaments under the auspices of Osmania University.  Apart from the above, annual Inter College (Engineering) tournaments are being held in different college campuses to promote healthy interaction between students and staff.Physical Director of Physical Education is Srinivas Nallella. Email Id: phy_director@mvsrec.edu.in . Dr. N. Srinivas has over 13 years of experience as a Physical Education Teacher maintains a passion for instilling in students the importance of lifelong learning, health and fitness. He serves as a role model through extensive participation in fitness activities and coaching of competitive (football / basketball / cricket) and non-competitive with a focus on team sportsmanship, physical strength, endurance and flexibility. He has obtained his PhD, M.Phil and M.P.Ed in Physical Education from Osmania University. He has 33 papers in National & International conferences and has published 22 papers in National & International Journals.To know about achievements in sports follow this link - <a href=\"https://www.mvsrec.edu.in/index.php?option=com_content&view=article&id=143&Itemid=1061#\">Click here</a>.Transportation : Regarding transportation you can contact Transport Incharge Mr.Shiva Prasad, Phone No. 9885921784.To know about buses and bus routes follow this link <a href=\"https://www.mvsrec.edu.in/index.php?option=com_content&view=article&id=809&Itemid=1409\">Click here</a> .Hostel Facility : MVSR College Hostel is headed by Sri. M.V. Vasudeva Rao, Treasurer, MES.  Name and Contact Details of Boys Hostel-  Mr.K.Ramanand, I/C Hostel, Ph. 9989051855 & 9000005463 .Mr.S.V.Chary, Estate Officer, Ph. 9246549827 & 9703618736.There is no college hostel Facility for girls.Computer Center : Computer centres are equipped with 90 Computer Systems and also provision to connect to laptop.These centres functions from 9:30AM to 6:30PM.Sports Club: Extracurricular activities, sports and games are encouraged by the college. Physical Education director is appointed for training and coaching the students for various sports and games. The responsibility of promoting such extracurricular activities is done by sports committee of the college. The college encourages the students for participation in inter collegiate, state and national level competitions. Different cultural activities are being performed along with sports activities in intra collegiate, intercollegiate, intervy, intra-state and national level. Large number of students have participated in different events at inter-university; inter-group, intercollegiate levels. Many of them received prizes in different events.  Our college has excellent sports facilities. The college has a sports and games: cricket, football, Table Tennis, Badminton Shuttle, Volley ball, athletics, Carrom, Kabbadi, Football etc. Students who are interested in the above are given special training by the Physical Education Department staff.Health Care: MVSR Engineering College provides ambulance services to the students and staff for any medical emergency which needs transportation of sick or injured students to and from nearby hospital or nursing home.Canteen: College has spacious canteen facility in the college premises. Canteen has a big kitchen with steam cooking fan and kitchen staff take extra care to provide our student with an excellent modern & hygienic food. The dishes prepared here are delicious, and nutritious. Adequate seating facilities are provided to accommodate students and staff even during peak time. E-Resources: E-Resources describes the cognitive science principles of effective multimedia learning using electronic educational technology.  Many forms are provided to students via access to NPTEL, SWAYAM, NDL, Journals, Magazines etc."]
context_options=["Admissions", "Placements", "Industrial Training", "Facilities"]
app=Flask(__name__)

def L(lang,text):
	result=text
	if lang=='Telugu':
		translator = EasyGoogleTranslate(source_language='te',target_language='en',timeout=50)
		result = translator.translate(text)
	if lang=='Hindi':
		translator = EasyGoogleTranslate(source_language='hi',target_language='en',timeout=50)
		result = translator.translate(text)
   
	return result

@app.route("/",methods=["GET"])
def index_get():
	return render_template("base.html")

@app.route("/predict",methods=["POST"])
def predict():
	to_lang= 'en'
	text=request.get_json().get("message")
	lang=request.get_json().get("language")
	print(lang)
	text=L(lang,text)
	if(present_context == ""):
		message={"answer": "Please choose one option."}
		return jsonify(message)
	else:
		question=text
		k=question_answerer(question=question, context=present_context)
		start=k['start']
		end=k['end']
		response=present_context[start:end]
		if(response=='.'):
			response='Sorry!! Can you be more specific?'
		if lang=='Telugu':
			translator=EasyGoogleTranslate(source_language='en',target_language='te',timeout=50)
			response=translator.translate(response)
		if lang=='Hindi':
			translator=EasyGoogleTranslate(source_language='en',target_language='hi',timeout=50)
			response=translator.translate(response)
		message={"answer": response}
		return jsonify(message)
@app.route("/options",methods=["POST"])
def options():
	id=request.get_json().get("id")
	lang=request.get_json().get("language")
	global present_context
	present_context = context[id]
	reply="You selected "+context_options[id]+". Ask a question."
	if lang=='Telugu':
		translator=EasyGoogleTranslate(source_language='en',target_language='te')
		reply=translator.translate(reply)
	if lang=='Hindi':
		translator=EasyGoogleTranslate(source_language='en',target_language='hi')
		reply=translator.translate(reply)
	message={"message": reply}
	return jsonify(message)
if __name__=="__main__":
	app.run(debug=True)